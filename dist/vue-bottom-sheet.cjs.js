"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),U=require("vue-router"),A=(b,p)=>{const l=b.__vccOpts||b;for(const[u,Y]of p)l[u]=Y;return l},G={class:"lg:hidden"},K=["href"],J=["href","onClick"],Q=5,T="--bottom-sheet-peek-height",W={__name:"BottomSheet",props:{modelValue:Boolean,middleY:{type:Number,default:50},fullY:{type:Number,default:5},quickLinks:{type:Object}},emits:["update:modelValue","state-change","handle-click"],setup(b,{emit:p}){const l=b,u=p;U.useRoute();const Y=e.ref(!1),P=e.ref(""),z=e.ref(null),D=e.ref(null),v=e.ref(null),_=e.ref(null),f=e.ref(!1),y=e.ref(!1),V=e.ref(0),w=e.ref(100),o=e.ref(100),k=e.ref(0),B=e.ref(0),a=e.ref(100),F=e.computed(()=>k.value>0?k.value+B.value:0);e.watch(v,async t=>{t&&(await e.nextTick(),k.value=t.offsetHeight)});const $=e.computed(()=>{const t=window.innerHeight;if(!t||k.value<=0)return-1;const n=k.value/t*100,s=(B.value||0)/t*100;return n+s});e.watch($,t=>{if(t>=0){const n=Math.max(0,100-t);if(Math.abs(n-a.value)>.1){const s=a.value;a.value=n,Math.abs(o.value-s)<1&&(o.value=a.value),Math.abs(w.value-s)<1&&!y.value&&(w.value=a.value)}}}),e.computed(()=>[a.value,l.middleY,l.fullY].sort((t,n)=>n-t));const j=e.computed(()=>({top:`${o.value}vh`,position:"fixed",left:"0",right:"0",bottom:"0",transition:f.value?"none":"top 0.3s ease-out",maxHeight:`calc(100vh - ${l.fullY}vh)`})),g=e.computed(()=>a.value<100&&Math.abs(o.value-a.value)<1);e.watch(g,async t=>{if(t&&(await e.nextTick(),_.value)){const n=_.value.offsetHeight;n>0&&B.value!==n&&(B.value=n)}},{immediate:!0}),e.watch([F,g],([t,n])=>{n&&t>0?document.documentElement.style.setProperty(T,`${t}px`):document.documentElement.style.setProperty(T,"0px")},{immediate:!0,deep:!0});const I=t=>{v.value&&!v.value.contains(t.target)||(t.preventDefault(),t.stopPropagation(),y.value=!0,f.value=!1,V.value=t.clientY,w.value=o.value,window.addEventListener("pointermove",L,{passive:!1}),window.addEventListener("pointerup",x),window.addEventListener("pointerleave",x))},L=t=>{if(!y.value)return;const n=t.clientY,s=Math.abs(n-V.value);if(!f.value&&s>Q&&(f.value=!0,document.body.style.cursor="grabbing",document.body.style.userSelect="none"),f.value){t.preventDefault();const i=n-V.value,m=window.innerHeight;if(m===0)return;const r=i/m*100;let c=w.value+r;const h=a.value<100?a.value:l.middleY;c=Math.max(l.fullY,Math.min(h,c)),o.value=c}},x=t=>{if(!y.value)return;const n=1,s=Math.abs(w.value-a.value)<n;if(f.value){f.value=!1,document.body.style.cursor="",document.body.style.userSelect="";const i=o.value,m=w.value,r=a.value,c=l.middleY,h=l.fullY;let d;const E=i<m;if(s&&E)if(i>c-n)d=c;else{const H=Math.abs(i-c);d=Math.abs(i-h)<H?h:c}else d=[r,c,h].reduce((S,q)=>Math.abs(q-i)<Math.abs(S-i)?q:S);o.value=d;let C="peek",M=!1;Math.abs(d-c)<n?(C="middle",M=!0):Math.abs(d-h)<n&&(C="full",M=!0),l.modelValue!==M&&u("update:modelValue",M),u("state-change",C,d)}else s&&(u("handle-click"),o.value=l.middleY,l.modelValue||u("update:modelValue",!0),u("state-change","middle",l.middleY));y.value=!1,window.removeEventListener("pointermove",L),window.removeEventListener("pointerup",x),window.removeEventListener("pointerleave",x)},O=()=>{o.value!==a.value&&(o.value=a.value,l.modelValue&&u("update:modelValue",!1),u("state-change","peek",a.value))};e.onMounted(async()=>{P.value=navigator.userAgent.toLowerCase(),Y.value=/ipad/.test(P.value)&&/safari/.test(P.value)&&!/chrome/.test(P.value),v.value&&(await e.nextTick(),k.value=v.value.offsetHeight),setTimeout(()=>{const t=a.value;l.modelValue?(Math.abs(o.value-t)<1||o.value>=100)&&(o.value=l.middleY,u("state-change","middle",l.middleY)):Math.abs(o.value-t)>.1&&(o.value=t,u("state-change","peek",t))},0),window.addEventListener("resize",N)}),e.onUnmounted(()=>{window.removeEventListener("pointermove",L),window.removeEventListener("pointerup",x),window.removeEventListener("pointerleave",x),window.removeEventListener("resize",N),document.body.style.cursor="",document.body.style.userSelect="",document.documentElement.style.removeProperty(T)});const N=async()=>{v.value&&(await e.nextTick(),k.value=v.value.offsetHeight),g.value&&_.value?(await e.nextTick(),B.value=_.value.offsetHeight):g.value};return e.watch(()=>l.modelValue,t=>{if(f.value||y.value)return;const n=o.value,s=1,i=Math.abs(n-l.middleY)<s||Math.abs(n-l.fullY)<s,m=Math.abs(n-a.value)<s;t&&!i?(o.value=l.middleY,u("state-change","middle",l.middleY)):!t&&!m&&(o.value=a.value,u("state-change","peek",a.value))}),(t,n)=>{const s=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",G,[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[g.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"fixed inset-0 z-40 bg-gray-900/60 pointer-events-auto",onClick:O}))]),_:1}),e.createElementVNode("div",{ref_key:"sheetRef",ref:z,class:"fixed bottom-0 left-0 right-0 bg-white rounded-t-xl shadow-2xl flex flex-col pointer-events-auto overflow-hidden touch-pan-y z-50",style:e.normalizeStyle(j.value)},[e.createElementVNode("div",{ref_key:"handleRef",ref:v,class:"py-3 flex justify-center items-center cursor-grab active:cursor-grabbing touch-none flex-shrink-0",onPointerdown:I},n[0]||(n[0]=[e.createElementVNode("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full pointer-events-none"},null,-1)]),544),g.value?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"quickLinksRef",ref:_,class:e.normalizeClass(["px-4","pt-3",l.quickLinks?"":" p-12 ",Y.value&&l.quickLinks?" pb-24 border-t border-gray-200 ":"",!Y.value&&l.quickLinks?" pb-14 border-t border-gray-200 ":""])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.quickLinks,(i,m)=>(e.openBlock(),e.createElementBlock("div",{key:`mobile-sheet-section-${m}`,class:"flex justify-around"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.items,(r,c)=>(e.openBlock(),e.createElementBlock("div",null,[r.href?(e.openBlock(),e.createElementBlock("a",{key:0,href:r.href,class:e.normalizeClass([r.current?"bg-gray-100/60 text-urbis-blue":"text-gray-700 hover:bg-gray-50 hover:text-urbis-blue","group flex gap-x-3 rounded-md p-2 text-sm/6 font-semibold"])},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(r.icon),e.mergeProps({ref_for:!0},r.iconProps,{class:["size-6 shrink-0",r.iconProps?"":r.current?"text-urbis-blue":"text-gray-400 group-hover:text-urbis-blue"],"aria-hidden":"true"}),null,16,["class"]))],10,K)):r.to?(e.openBlock(),e.createBlock(s,{key:1,to:r.to,custom:""},{default:e.withCtx(({href:h,navigate:d,isActive:E})=>[e.createElementVNode("a",{href:h,onClick:e.withModifiers(()=>{d()},["prevent"]),class:e.normalizeClass([E?"bg-gray-100/60 text-urbis-blue":"text-gray-700 hover:bg-gray-50 hover:text-urbis-blue","group flex gap-x-3 rounded-md p-2 text-sm/6 font-semibold"])},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(r.icon),e.mergeProps({ref_for:!0},r.iconProps,{class:["size-6 shrink-0",r.iconProps?"":E?"text-urbis-blue":"text-gray-400 group-hover:text-urbis-blue"],"aria-hidden":"true"}),null,16,["class"]))],10,J)]),_:2},1032,["to"])):e.createCommentVNode("",!0)]))),256))]))),128))],2)):e.createCommentVNode("",!0),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[g.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"contentRef",ref:D,class:"flex-1 overflow-y-auto px-4 pb-4 min-h-[0]"},[e.renderSlot(t.$slots,"default",{},void 0,!0)],512))]),_:3})],4)])}}},R=A(W,[["__scopeId","data-v-628d2724"]]),X={install:(b,p)=>{const l=(p==null?void 0:p.componentName)||"BottomSheet";b.component(l,R)}};exports.BottomSheet=R;exports.default=X;
