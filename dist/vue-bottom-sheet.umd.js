(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["exports","vue","vue-router"],e):(d=typeof globalThis<"u"?globalThis:d||self,e(d.VueBottomSheet={},d.Vue,d.VueRouter))})(this,function(d,e,D){"use strict";const j=(y,v)=>{const n=y.__vccOpts||y;for(const[i,_]of v)n[i]=_;return n},F={class:"lg:hidden"},$=["href"],I=["href","onClick"],O=5,L="--bottom-sheet-peek-height",H=j({__name:"BottomSheet",props:{modelValue:Boolean,middleY:{type:Number,default:50},fullY:{type:Number,default:5},quickLinks:{type:Object}},emits:["update:modelValue","state-change","handle-click"],setup(y,{emit:v}){const n=y,i=v;D.useRoute();const _=e.ref(!1),E=e.ref(""),A=e.ref(null),G=e.ref(null),m=e.ref(null),B=e.ref(null),h=e.ref(!1),w=e.ref(!1),C=e.ref(0),x=e.ref(100),l=e.ref(100),b=e.ref(0),P=e.ref(0),a=e.ref(100),K=e.computed(()=>b.value>0?b.value+P.value:0);e.watch(m,async t=>{t&&(await e.nextTick(),b.value=t.offsetHeight)});const J=e.computed(()=>{const t=window.innerHeight;if(!t||b.value<=0)return-1;const o=b.value/t*100,s=(P.value||0)/t*100;return o+s});e.watch(J,t=>{if(t>=0){const o=Math.max(0,100-t);if(Math.abs(o-a.value)>.1){const s=a.value;a.value=o,Math.abs(l.value-s)<1&&(l.value=a.value),Math.abs(x.value-s)<1&&!w.value&&(x.value=a.value)}}}),e.computed(()=>[a.value,n.middleY,n.fullY].sort((t,o)=>o-t));const Q=e.computed(()=>({top:`${l.value}vh`,position:"fixed",left:"0",right:"0",bottom:"0",transition:h.value?"none":"top 0.3s ease-out",maxHeight:`calc(100vh - ${n.fullY}vh)`})),g=e.computed(()=>a.value<100&&Math.abs(l.value-a.value)<1);e.watch(g,async t=>{if(t&&(await e.nextTick(),B.value)){const o=B.value.offsetHeight;o>0&&P.value!==o&&(P.value=o)}},{immediate:!0}),e.watch([K,g],([t,o])=>{o&&t>0?document.documentElement.style.setProperty(L,`${t}px`):document.documentElement.style.setProperty(L,"0px")},{immediate:!0,deep:!0});const W=t=>{m.value&&!m.value.contains(t.target)||(t.preventDefault(),t.stopPropagation(),w.value=!0,h.value=!1,C.value=t.clientY,x.value=l.value,window.addEventListener("pointermove",T,{passive:!1}),window.addEventListener("pointerup",Y),window.addEventListener("pointerleave",Y))},T=t=>{if(!w.value)return;const o=t.clientY,s=Math.abs(o-C.value);if(!h.value&&s>O&&(h.value=!0,document.body.style.cursor="grabbing",document.body.style.userSelect="none"),h.value){t.preventDefault();const c=o-C.value,p=window.innerHeight;if(p===0)return;const r=c/p*100;let u=x.value+r;const k=a.value<100?a.value:n.middleY;u=Math.max(n.fullY,Math.min(k,u)),l.value=u}},Y=t=>{if(!w.value)return;const o=1,s=Math.abs(x.value-a.value)<o;if(h.value){h.value=!1,document.body.style.cursor="",document.body.style.userSelect="";const c=l.value,p=x.value,r=a.value,u=n.middleY,k=n.fullY;let f;const M=c<p;if(s&&M)if(c>u-o)f=u;else{const R=Math.abs(c-u);f=Math.abs(c-k)<R?k:u}else f=[r,u,k].reduce((N,z)=>Math.abs(z-c)<Math.abs(N-c)?z:N);l.value=f;let S="peek",V=!1;Math.abs(f-u)<o?(S="middle",V=!0):Math.abs(f-k)<o&&(S="full",V=!0),n.modelValue!==V&&i("update:modelValue",V),i("state-change",S,f)}else s&&(i("handle-click"),l.value=n.middleY,n.modelValue||i("update:modelValue",!0),i("state-change","middle",n.middleY));w.value=!1,window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",Y),window.removeEventListener("pointerleave",Y)},X=()=>{l.value!==a.value&&(l.value=a.value,n.modelValue&&i("update:modelValue",!1),i("state-change","peek",a.value))};e.onMounted(async()=>{E.value=navigator.userAgent.toLowerCase(),_.value=/ipad/.test(E.value)&&/safari/.test(E.value)&&!/chrome/.test(E.value),m.value&&(await e.nextTick(),b.value=m.value.offsetHeight),setTimeout(()=>{const t=a.value;n.modelValue?(Math.abs(l.value-t)<1||l.value>=100)&&(l.value=n.middleY,i("state-change","middle",n.middleY)):Math.abs(l.value-t)>.1&&(l.value=t,i("state-change","peek",t))},0),window.addEventListener("resize",q)}),e.onUnmounted(()=>{window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",Y),window.removeEventListener("pointerleave",Y),window.removeEventListener("resize",q),document.body.style.cursor="",document.body.style.userSelect="",document.documentElement.style.removeProperty(L)});const q=async()=>{m.value&&(await e.nextTick(),b.value=m.value.offsetHeight),g.value&&B.value?(await e.nextTick(),P.value=B.value.offsetHeight):g.value};return e.watch(()=>n.modelValue,t=>{if(h.value||w.value)return;const o=l.value,s=1,c=Math.abs(o-n.middleY)<s||Math.abs(o-n.fullY)<s,p=Math.abs(o-a.value)<s;t&&!c?(l.value=n.middleY,i("state-change","middle",n.middleY)):!t&&!p&&(l.value=a.value,i("state-change","peek",a.value))}),(t,o)=>{const s=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",F,[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[g.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"fixed inset-0 z-40 bg-gray-900/60 pointer-events-auto",onClick:X}))]),_:1}),e.createElementVNode("div",{ref_key:"sheetRef",ref:A,class:"fixed bottom-0 left-0 right-0 bg-white rounded-t-xl shadow-2xl flex flex-col pointer-events-auto overflow-hidden touch-pan-y z-50",style:e.normalizeStyle(Q.value)},[e.createElementVNode("div",{ref_key:"handleRef",ref:m,class:"py-3 flex justify-center items-center cursor-grab active:cursor-grabbing touch-none flex-shrink-0",onPointerdown:W},o[0]||(o[0]=[e.createElementVNode("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full pointer-events-none"},null,-1)]),544),g.value?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"quickLinksRef",ref:B,class:e.normalizeClass(["px-4","pt-3",n.quickLinks?"":" p-12 ",_.value&&n.quickLinks?" pb-24 border-t border-gray-200 ":"",!_.value&&n.quickLinks?" pb-14 border-t border-gray-200 ":""])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.quickLinks,(c,p)=>(e.openBlock(),e.createElementBlock("div",{key:`mobile-sheet-section-${p}`,class:"flex justify-around"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.items,(r,u)=>(e.openBlock(),e.createElementBlock("div",null,[r.href?(e.openBlock(),e.createElementBlock("a",{key:0,href:r.href,class:e.normalizeClass([r.current?"bg-gray-100/60 text-urbis-blue":"text-gray-700 hover:bg-gray-50 hover:text-urbis-blue","group flex gap-x-3 rounded-md p-2 text-sm/6 font-semibold"])},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(r.icon),e.mergeProps({ref_for:!0},r.iconProps,{class:["size-6 shrink-0",r.iconProps?"":r.current?"text-urbis-blue":"text-gray-400 group-hover:text-urbis-blue"],"aria-hidden":"true"}),null,16,["class"]))],10,$)):r.to?(e.openBlock(),e.createBlock(s,{key:1,to:r.to,custom:""},{default:e.withCtx(({href:k,navigate:f,isActive:M})=>[e.createElementVNode("a",{href:k,onClick:e.withModifiers(()=>{f()},["prevent"]),class:e.normalizeClass([M?"bg-gray-100/60 text-urbis-blue":"text-gray-700 hover:bg-gray-50 hover:text-urbis-blue","group flex gap-x-3 rounded-md p-2 text-sm/6 font-semibold"])},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(r.icon),e.mergeProps({ref_for:!0},r.iconProps,{class:["size-6 shrink-0",r.iconProps?"":M?"text-urbis-blue":"text-gray-400 group-hover:text-urbis-blue"],"aria-hidden":"true"}),null,16,["class"]))],10,I)]),_:2},1032,["to"])):e.createCommentVNode("",!0)]))),256))]))),128))],2)):e.createCommentVNode("",!0),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[g.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"contentRef",ref:G,class:"flex-1 overflow-y-auto px-4 pb-4 min-h-[0]"},[e.renderSlot(t.$slots,"default",{},void 0,!0)],512))]),_:3})],4)])}}},[["__scopeId","data-v-628d2724"]]),U={install:(y,v)=>{const n=(v==null?void 0:v.componentName)||"BottomSheet";y.component(n,H)}};d.BottomSheet=H,d.default=U,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
