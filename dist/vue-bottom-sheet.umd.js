(function(m,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["exports","vue","vue-router"],e):(m=typeof globalThis<"u"?globalThis:m||self,e(m.VueBottomSheet={},m.Vue,m.VueRouter))})(this,function(m,e,D){"use strict";const j=(w,g)=>{const n=w.__vccOpts||w;for(const[i,P]of g)n[i]=P;return n},F={class:"lg:hidden"},$=["href"],O=["href","onClick"],I=5,C="--bottom-sheet-peek-height",q=j({__name:"BottomSheet",props:{modelValue:Boolean,middleY:{type:Number,default:50},fullY:{type:Number,default:5},quickLinks:{type:Object}},emits:["update:modelValue","state-change","handle-click"],setup(w,{emit:g}){const n=w,i=g;D.useRoute();const P=e.ref(!1),M=e.ref(""),A=e.ref(null),G=e.ref(null),p=e.ref(null),B=e.ref(null),k=e.ref(!1),x=e.ref(!1),T=e.ref(0),Y=e.ref(100),a=e.ref(100),b=e.ref(0),u=e.ref(0),r=e.ref(100),K=e.computed(()=>b.value>0?b.value+u.value:0);e.watch(p,async t=>{t&&(await e.nextTick(),b.value=t.offsetHeight)});const J=e.computed(()=>{const t=window.innerHeight;if(!t||b.value<=0)return-1;const l=b.value/t*100,c=(u.value||0)/t*100;return l+c});e.watch(J,t=>{if(t>=0){const l=Math.max(0,100-t);if(Math.abs(l-r.value)>.1){const c=r.value;r.value=l,Math.abs(a.value-c)<1&&(a.value=r.value),Math.abs(Y.value-c)<1&&!x.value&&(Y.value=r.value)}}}),e.computed(()=>[r.value,n.middleY,n.fullY].sort((t,l)=>l-t));const Q=e.computed(()=>({top:`${a.value}vh`,position:"fixed",left:"0",right:"0",bottom:"0",transition:k.value?"none":"top 0.3s ease-out",maxHeight:`calc(100vh - ${n.fullY}vh)`})),y=e.computed(()=>r.value<100&&Math.abs(a.value-r.value)<1);e.watch(y,async t=>{if(t)if(await e.nextTick(),B.value){const l=B.value.offsetHeight;u.value!==l&&(u.value=l)}else u.value!==0&&(u.value=0);else u.value!==0&&(u.value=0)},{immediate:!0}),e.watch([K,y],([t,l])=>{l&&t>0?document.documentElement.style.setProperty(C,`${t}px`):document.documentElement.style.setProperty(C,"0px")},{immediate:!0});const W=t=>{p.value&&!p.value.contains(t.target)||(t.preventDefault(),t.stopPropagation(),x.value=!0,k.value=!1,T.value=t.clientY,Y.value=a.value,window.addEventListener("pointermove",S,{passive:!1}),window.addEventListener("pointerup",_),window.addEventListener("pointerleave",_))},S=t=>{if(!x.value)return;const l=t.clientY,c=Math.abs(l-T.value);if(!k.value&&c>I&&(k.value=!0,document.body.style.cursor="grabbing",document.body.style.userSelect="none"),k.value){t.preventDefault();const s=l-T.value,h=window.innerHeight;if(h===0)return;const o=s/h*100;let d=Y.value+o;const v=r.value<100?r.value:n.middleY;d=Math.max(n.fullY,Math.min(v,d)),a.value=d}},_=t=>{if(!x.value)return;const l=1,c=Math.abs(Y.value-r.value)<l;if(k.value){k.value=!1,document.body.style.cursor="",document.body.style.userSelect="";const s=a.value,h=Y.value,o=r.value,d=n.middleY,v=n.fullY;let f;const V=s<h;if(c&&V)if(s>d-l)f=d;else{const E=Math.abs(s-d);f=Math.abs(s-v)<E?v:d}else{const E=[d,v];o<100&&E.push(o),E.length===0?f=h:f=E.reduce((N,z)=>Math.abs(z-s)<Math.abs(N-s)?z:N)}a.value=f;let H="peek",L=!1;Math.abs(f-d)<l?(H="middle",L=!0):Math.abs(f-v)<l&&(H="full",L=!0),n.modelValue!==L&&i("update:modelValue",L),i("state-change",H,f)}else c&&(i("handle-click"),a.value=n.middleY,n.modelValue||i("update:modelValue",!0),i("state-change","middle",n.middleY));x.value=!1,window.removeEventListener("pointermove",S),window.removeEventListener("pointerup",_),window.removeEventListener("pointerleave",_)},X=()=>{a.value!==r.value&&r.value<100&&(a.value=r.value,n.modelValue&&i("update:modelValue",!1),i("state-change","peek",r.value))};e.onMounted(async()=>{M.value=navigator.userAgent.toLowerCase(),P.value=/ipad/.test(M.value)&&/safari/.test(M.value)&&!/chrome/.test(M.value),p.value&&(await e.nextTick(),b.value=p.value.offsetHeight),setTimeout(()=>{const t=r.value;n.modelValue?(Math.abs(a.value-t)<1||a.value>=100)&&(a.value=n.middleY,i("state-change","middle",n.middleY)):t<100&&Math.abs(a.value-t)>.1?(a.value=t,i("state-change","peek",t)):t>=100&&a.value<100&&(a.value=100,i("state-change","hidden",100))},0),window.addEventListener("resize",R)}),e.onUnmounted(()=>{window.removeEventListener("pointermove",S),window.removeEventListener("pointerup",_),window.removeEventListener("pointerleave",_),window.removeEventListener("resize",R),document.body.style.cursor="",document.body.style.userSelect="",document.documentElement.style.removeProperty(C)});const R=async()=>{if(p.value&&(await e.nextTick(),b.value=p.value.offsetHeight),y.value&&B.value){await e.nextTick();const t=B.value.offsetHeight;u.value!==t&&(u.value=t)}else y.value||u.value!==0&&(u.value=0)};return e.watch(()=>n.modelValue,t=>{if(k.value||x.value)return;const l=a.value,c=1,s=r.value,h=Math.abs(l-n.middleY)<c||Math.abs(l-n.fullY)<c,o=s<100&&Math.abs(l-s)<c;t&&!h?(a.value=n.middleY,i("state-change","middle",n.middleY)):!t&&!o&&(s<100?(a.value=s,i("state-change","peek",s)):(a.value=100,i("state-change","hidden",100)))}),(t,l)=>{const c=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",F,[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[y.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"fixed inset-0 z-40 bg-gray-900/60 pointer-events-auto",onClick:X}))]),_:1}),e.createElementVNode("div",{ref_key:"sheetRef",ref:A,class:"fixed bottom-0 left-0 right-0 bg-white rounded-t-xl shadow-2xl flex flex-col pointer-events-auto overflow-hidden touch-pan-y z-50",style:e.normalizeStyle(Q.value)},[e.createElementVNode("div",{ref_key:"handleRef",ref:p,class:"py-3 flex justify-center items-center cursor-grab active:cursor-grabbing touch-none flex-shrink-0",onPointerdown:W},l[0]||(l[0]=[e.createElementVNode("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full pointer-events-none"},null,-1)]),544),y.value?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"quickLinksRef",ref:B,class:e.normalizeClass(["px-4","pt-3",n.quickLinks?"":" p-12 ",P.value&&n.quickLinks?" pb-24 border-t border-gray-200 ":"",!P.value&&n.quickLinks?" pb-14 border-t border-gray-200 ":""])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.quickLinks,(s,h)=>(e.openBlock(),e.createElementBlock("div",{key:`mobile-sheet-section-${h}`,class:"flex justify-around"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.items,(o,d)=>(e.openBlock(),e.createElementBlock("div",{key:d},[o.href?(e.openBlock(),e.createElementBlock("a",{key:0,href:o.href,class:e.normalizeClass([o.current?"bg-gray-100/60 text-urbis-blue":"text-gray-700 hover:bg-gray-50 hover:text-urbis-blue","group flex gap-x-3 rounded-md p-2 text-sm/6 font-semibold"])},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.icon),e.mergeProps({ref_for:!0},o.iconProps,{class:["size-6 shrink-0",o.iconProps?"":o.current?"text-urbis-blue":"text-gray-400 group-hover:text-urbis-blue"],"aria-hidden":"true"}),null,16,["class"]))],10,$)):o.to?(e.openBlock(),e.createBlock(c,{key:1,to:o.to,custom:""},{default:e.withCtx(({href:v,navigate:f,isActive:V})=>[e.createElementVNode("a",{href:v,onClick:e.withModifiers(()=>{f()},["prevent"]),class:e.normalizeClass([V?"bg-gray-100/60 text-urbis-blue":"text-gray-700 hover:bg-gray-50 hover:text-urbis-blue","group flex gap-x-3 rounded-md p-2 text-sm/6 font-semibold"])},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.icon),e.mergeProps({ref_for:!0},o.iconProps,{class:["size-6 shrink-0",o.iconProps?"":V?"text-urbis-blue":"text-gray-400 group-hover:text-urbis-blue"],"aria-hidden":"true"}),null,16,["class"]))],10,O)]),_:2},1032,["to"])):e.createCommentVNode("",!0)]))),128))]))),128))],2)):e.createCommentVNode("",!0),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[y.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"contentRef",ref:G,class:"flex-1 overflow-y-auto px-4 pb-4 min-h-[0]"},[e.renderSlot(t.$slots,"default",{},void 0,!0)],512))]),_:3})],4)])}}},[["__scopeId","data-v-cea64601"]]),U={install:(w,g)=>{const n=(g==null?void 0:g.componentName)||"BottomSheet";w.component(n,q)}};m.BottomSheet=q,m.default=U,Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
