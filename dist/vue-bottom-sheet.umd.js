(function(u,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["exports","vue","vue-router"],e):(u=typeof globalThis<"u"?globalThis:u||self,e(u.VueBottomSheet={},u.Vue,u.VueRouter))})(this,function(u,e,R){"use strict";const D=(b,v)=>{const n=b.__vccOpts||b;for(const[i,x]of v)n[i]=x;return n},j={class:"lg:hidden"},F=["href"],O=["href","onClick"],$=5,N=D({__name:"BottomSheet",props:{modelValue:Boolean,middleY:{type:Number,default:50},fullY:{type:Number,default:5},quickLinks:{type:Object}},emits:["update:modelValue","state-change","handle-click"],setup(b,{emit:v}){const n=b,i=v;R.useRoute();const x=e.ref(!1),M=e.ref(""),U=e.ref(null),A=e.ref(null),m=e.ref(null),Y=e.ref(null),h=e.ref(!1),g=e.ref(!1),L=e.ref(0),y=e.ref(100),l=e.ref(100),B=e.ref(0),V=e.ref(0),a=e.ref(100);e.watch(m,async t=>{t&&(await e.nextTick(),B.value=t.offsetHeight)},{immediate:!0});const G=e.computed(()=>{const t=window.innerHeight;if(!t||B.value<=0)return-1;const o=B.value/t*100,s=(V.value||0)/t*100;return o+s});e.watch(G,t=>{if(t>=0){const o=Math.max(0,100-t);if(Math.abs(o-a.value)>.1){const s=a.value;a.value=o,Math.abs(l.value-s)<1&&(l.value=a.value),Math.abs(y.value-s)<1&&!g.value&&(y.value=a.value)}}}),e.computed(()=>[a.value,n.middleY,n.fullY].sort((t,o)=>o-t));const J=e.computed(()=>({top:`${l.value}vh`,position:"fixed",left:"0",right:"0",bottom:"0",transition:h.value?"none":"top 0.3s ease-out",maxHeight:`calc(100vh - ${n.fullY}vh)`})),_=e.computed(()=>a.value<100&&Math.abs(l.value-a.value)<1);e.watch(_,async t=>{if(t&&(await e.nextTick(),Y.value)){const o=Y.value.offsetHeight;o>0&&V.value!==o&&(V.value=o)}});const K=t=>{m.value&&!m.value.contains(t.target)||(t.preventDefault(),t.stopPropagation(),g.value=!0,h.value=!1,L.value=t.clientY,y.value=l.value,window.addEventListener("pointermove",C,{passive:!1}),window.addEventListener("pointerup",w),window.addEventListener("pointerleave",w))},C=t=>{if(!g.value)return;const o=t.clientY,s=Math.abs(o-L.value);if(!h.value&&s>$&&(h.value=!0,document.body.style.cursor="grabbing",document.body.style.userSelect="none"),h.value){t.preventDefault();const c=o-L.value,p=window.innerHeight;if(p===0)return;const r=c/p*100;let d=y.value+r;const k=a.value<100?a.value:n.middleY;d=Math.max(n.fullY,Math.min(k,d)),l.value=d}},w=t=>{if(!g.value)return;const o=1,s=Math.abs(y.value-a.value)<o;if(h.value){h.value=!1,document.body.style.cursor="",document.body.style.userSelect="";const c=l.value,p=y.value,r=a.value,d=n.middleY,k=n.fullY;let f;const P=c<p;if(s&&P)if(c>d-o)f=d;else{const q=Math.abs(c-d);f=Math.abs(c-k)<q?k:d}else f=[r,d,k].reduce((S,z)=>Math.abs(z-c)<Math.abs(S-c)?z:S);l.value=f;let T="peek",E=!1;Math.abs(f-d)<o?(T="middle",E=!0):Math.abs(f-k)<o&&(T="full",E=!0),n.modelValue!==E&&i("update:modelValue",E),i("state-change",T,f)}else s&&(i("handle-click"),l.value=n.middleY,n.modelValue||i("update:modelValue",!0),i("state-change","middle",n.middleY));g.value=!1,window.removeEventListener("pointermove",C),window.removeEventListener("pointerup",w),window.removeEventListener("pointerleave",w)},Q=()=>{l.value!==a.value&&(l.value=a.value,n.modelValue&&i("update:modelValue",!1),i("state-change","peek",a.value))};e.onMounted(async()=>{M.value=navigator.userAgent.toLowerCase(),x.value=/ipad/.test(M.value)&&/safari/.test(M.value)&&!/chrome/.test(M.value),m.value&&(await e.nextTick(),B.value=m.value.offsetHeight),setTimeout(()=>{const t=a.value;n.modelValue?(Math.abs(l.value-t)<1||l.value>=100)&&(l.value=n.middleY,i("state-change","middle",n.middleY)):Math.abs(l.value-t)>.1&&(l.value=t,i("state-change","peek",t))},0),window.addEventListener("resize",H)}),e.onUnmounted(()=>{window.removeEventListener("pointermove",C),window.removeEventListener("pointerup",w),window.removeEventListener("pointerleave",w),window.removeEventListener("resize",H),document.body.style.cursor="",document.body.style.userSelect=""});const H=async()=>{m.value&&(await e.nextTick(),B.value=m.value.offsetHeight),_.value&&Y.value&&(await e.nextTick(),V.value=Y.value.offsetHeight)};return e.watch(()=>n.modelValue,t=>{if(h.value||g.value)return;const o=l.value,s=1,c=Math.abs(o-n.middleY)<s||Math.abs(o-n.fullY)<s,p=Math.abs(o-a.value)<s;t&&!c?(l.value=n.middleY,i("state-change","middle",n.middleY)):!t&&!p&&(l.value=a.value,i("state-change","peek",a.value))}),(t,o)=>{const s=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",j,[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[_.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"fixed inset-0 z-40 bg-gray-900/60 pointer-events-auto",onClick:Q}))]),_:1}),e.createElementVNode("div",{ref_key:"sheetRef",ref:U,class:"fixed bottom-0 left-0 right-0 bg-white rounded-t-xl shadow-2xl flex flex-col pointer-events-auto overflow-hidden touch-pan-y z-50",style:e.normalizeStyle(J.value)},[e.createElementVNode("div",{ref_key:"handleRef",ref:m,class:"py-3 flex justify-center items-center cursor-grab active:cursor-grabbing touch-none flex-shrink-0",onPointerdown:K},o[0]||(o[0]=[e.createElementVNode("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full pointer-events-none"},null,-1)]),544),_.value?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"quickLinksRef",ref:Y,class:e.normalizeClass(["px-4","pt-3",n.quickLinks?"":" p-12 ",x.value&&n.quickLinks?" pb-24 border-t border-gray-200 ":"",!x.value&&n.quickLinks?" pb-14 border-t border-gray-200 ":""])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.quickLinks,(c,p)=>(e.openBlock(),e.createElementBlock("div",{key:`mobile-sheet-section-${p}`,class:"flex justify-around"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.items,(r,d)=>(e.openBlock(),e.createElementBlock("div",null,[r.href?(e.openBlock(),e.createElementBlock("a",{key:0,href:r.href,class:e.normalizeClass([r.current?"bg-gray-100/60 text-urbis-blue":"text-gray-700 hover:bg-gray-50 hover:text-urbis-blue","group flex gap-x-3 rounded-md p-2 text-sm/6 font-semibold"])},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(r.icon),e.mergeProps({ref_for:!0},r.iconProps,{class:["size-6 shrink-0",r.iconProps?"":r.current?"text-urbis-blue":"text-gray-400 group-hover:text-urbis-blue"],"aria-hidden":"true"}),null,16,["class"]))],10,F)):r.to?(e.openBlock(),e.createBlock(s,{key:1,to:r.to,custom:""},{default:e.withCtx(({href:k,navigate:f,isActive:P})=>[e.createElementVNode("a",{href:k,onClick:e.withModifiers(()=>{f()},["prevent"]),class:e.normalizeClass([P?"bg-gray-100/60 text-urbis-blue":"text-gray-700 hover:bg-gray-50 hover:text-urbis-blue","group flex gap-x-3 rounded-md p-2 text-sm/6 font-semibold"])},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(r.icon),e.mergeProps({ref_for:!0},r.iconProps,{class:["size-6 shrink-0",r.iconProps?"":P?"text-urbis-blue":"text-gray-400 group-hover:text-urbis-blue"],"aria-hidden":"true"}),null,16,["class"]))],10,O)]),_:2},1032,["to"])):e.createCommentVNode("",!0)]))),256))]))),128))],2)):e.createCommentVNode("",!0),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[_.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"contentRef",ref:A,class:"flex-1 overflow-y-auto px-4 pb-4 min-h-[0]"},[e.renderSlot(t.$slots,"default",{},void 0,!0)],512))]),_:3})],4)])}}},[["__scopeId","data-v-de3f53df"]]),I={install:(b,v)=>{const n=(v==null?void 0:v.componentName)||"BottomSheet";b.component(n,N)}};u.BottomSheet=N,u.default=I,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
